/* Command objects */

/* Notification Commands
 *
 * Please check the documentation for all required and
 * optional parameters.
 */

/* ############# Pour tous serveurs  ############ */

object CheckCommand "by_ssh_apt" {
  import "by_ssh"
  vars.by_ssh_command = "/usr/lib/nagios/plugins/check_apt"
}

object CheckCommand "by_ssh_check_load" {
  /*
  A warning alert, if CPU is 70% for 5min, 60% for 10mins, 50% for 15mins.
  A critical alert, if CPU is 90% for 5min, 80% for 10mins, 70% for 15mins
  */
  import "by_ssh"
  vars.by_ssh_command = "/usr/lib/nagios/plugins/check_load -w 0.8,0.7,0.6 -c 0.9,0.9,0.8 "
}

object CheckCommand "by_ssh_check_disk" {
  import "by_ssh"
  vars.by_ssh_command = "/usr/lib/nagios/plugins/check_disk -w 100 -c 50 /"
}

object CheckCommand "by_ssh_check_io" {
  import "by_ssh"
  vars.by_ssh_command = "/usr/lib/nagios/plugins/check_diskstat.sh -d sda -w 200,100000,100000 -c 300,200000,200000"
}

object CheckCommand "by_ssh_ntp_time" {
  import "by_ssh"
  vars.by_ssh_command = "/usr/lib/nagios/plugins/check_ntp_time -H localhost -w 0.5 -c 1"
}

object CheckCommand "by_ssh_check_disk_state" {
  import "by_ssh"
  vars.by_ssh_command = "/usr/lib/nagios/plugins/check_ide_smart -d /dev/sda"
}

object CheckCommand "by_ssh_check_mount" {
  import "by_ssh"
  vars.by_ssh_command = "/usr/lib/nagios/plugins/check_mountpoints -a"
}

/* ############# Pour serveurs docker ############ */

object CheckCommand "by_ssh_docker_memory" {
  import "by_ssh"
  vars.by_ssh_command = "/usr/lib/nagios/plugins/check_docker --memory 80:90:%"
}

object CheckCommand "by_ssh_docker_cpu" {
  import "by_ssh"
  vars.by_ssh_command = "/usr/lib/nagios/plugins/check_docker --cpu 80:100"
}

object CheckCommand "by_ssh_docker_status" {
  import "by_ssh"
  vars.by_ssh_command = "/usr/lib/nagios/plugins/check_docker --status running"
}

/* ## Script ci-dessous fait maison ## */
object CheckCommand "by_ssh_docker_version_vox" {
  import "by_ssh"
  vars.by_ssh_command = "/usr/lib/nagios/plugins/check_vox_dpkg"
}

/* ############# Pour les serveurs physiques ############ */

/* # Attention installer "lm-sensors" sur la machine hote */

object CheckCommand "by_ssh_sensors" {
  import "by_ssh"
  vars.by_ssh_command = "/usr/lib/nagios/plugins/check_sensors"
}

/* ############# Pour les imprimantes ############ */


object CheckCommand "check_printer_snmp" {
  command = "/etc/icinga2/plugin_supplementaires/check_snmp_printer_v4 -H $address$ -C public -t 'CONSUM ALL' -w 10 -c 5"  
}

/*
Consumables you may monitor:
Black Toner [K] Cartridge;SN4805AF80E00004C6
Yellow Toner [Y] Cartridge;SN45215980E0000465
Magenta Toner [M] Cartridge;SN5712E880E0000412
Cyan Toner [C] Cartridge;SN190A0D80E00004FA
*/

object CheckCommand "check_printer_Xerox7120_Black" { 
command = "/etc/icinga2/plugin_supplementaires/check_snmp_printer_v4 -H $address$ -C public -t 'CONSUMX Black Toner [K] Cartridge;SN4805AF80E00004C6' -w 10 -c 5" }
object CheckCommand "check_printer_Xerox7120_Yellow" {
command = "/etc/icinga2/plugin_supplementaires/check_snmp_printer_v4 -H $address$ -C public -t 'CONSUMX Yellow Toner [Y] Cartridge;SN45215980E0000465' -w 10 -c 5" }
object CheckCommand "check_printer_Xerox7120_Magenta" {
command = "/etc/icinga2/plugin_supplementaires/check_snmp_printer_v4 -H $address$ -C public -t 'CONSUMX Magenta Toner [M] Cartridge;SN5712E880E0000412' -w 10 -c 5" }
object CheckCommand "check_printer_Xerox7120_Cyan" {
command = "/etc/icinga2/plugin_supplementaires/check_snmp_printer_v4 -H $address$ -C public -t 'CONSUMX Cyan Toner [C] Cartridge;SN190A0D80E00004FA' -w 10 -c 5" }

/*
## Brother HL-5450DN ##
Consumables you may monitor:
Black Toner Cartridge
Drum Unit
*/

object CheckCommand "check_printer_Brother_Black" {
command = "/etc/icinga2/plugin_supplementaires/check_snmp_printer_v4 -H $address$ -C public -t 'CONSUMX Black Toner Cartridge' -w 15 -c 5" }
object CheckCommand "check_printer_Brother_Drum" {
command = "/etc/icinga2/plugin_supplementaires/check_snmp_printer_v4 -H $address$ -C public -t 'CONSUMX Drum Unit' -w 15 -c 5" }


/* ##################### Serveur Externe ################## */

object CheckCommand "check_httpnew" {
    command = "/usr/lib/nagios/plugins/check_http -H $fqdn$"
}

object CheckCommand "check_http_8080" {
    command = "/usr/lib/nagios/plugins/check_http -H $fqdn$ -p 8080"
}

/* ##################### NAS ################## */

object CheckCommand "by_snmp_qnap_check_hdstatus" {
  command = "/usr/lib/nagios/plugins/check_qnap2.sh -H $address$ -a hdstatus"
}

object CheckCommand "by_snmp_qnap_check_raidstatus" {
  command = "/usr/lib/nagios/plugins/check_qnap2.sh -H $address$ -a raidstatus"
}

object CheckCommand "by_snmp_qnap_check_diskusage" {
  command = "/usr/lib/nagios/plugins/check_qnap2.sh -H $address$ -a diskusage"
}

/* ##################### Autre ################## */

object CheckCommand "check_speedtest" {
  command = "/usr/bin/speedtest --simple"
}

object CheckCommand "by_ssh_swap" {
  import "by_ssh"
  vars.by_ssh_command = "/usr/lib/nagios/plugins/check_swap -w $by_ssh_swap_warn$ -c $by_ssh_swap_crit$"
  vars.by_ssh_swap_warn = "75%"
  vars.by_ssh_swap_crit = "50%"
}
