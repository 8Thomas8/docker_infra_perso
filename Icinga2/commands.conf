/* ############# Pour les serveurs physiques/hyperviseur ############ */

/* 1 – Etat de sante HDD */
object CheckCommand "by_ssh_check_disk_state" {
  import "by_ssh"
  vars.by_ssh_command = "/usr/lib/nagios/plugins/check_ide_smart -d /dev/sda"
}

/* 2 – Temperature et ventilateur */
object CheckCommand "by_ssh_ide_smart" {
  import "by_ssh"
  vars.by_ssh_command = "/usr/lib/nagios/plugins/./check_temp.sh –sensor "Core 0" -w 50 -c 100"
}

/* 3 – RAID Logiciel */
/* En cours */

/* 4 – Check pile CMOS */
/* En cours */

/* 5 – Consommation électrique */
/* En cours */

/* 6 – Redondance et état de lalimentation */
/* En cours */

/* ############# Pour les machines virtuelles ############ */

/* 1 – Check du processeur */
object CheckCommand "by_ssh_check_load" {
  /* A warning alert, if CPU is 70% for 5min, 60% for 10mins, 50% for 15mins */
  /* A critical alert, if CPU is 90% for 5min, 80% for 10mins, 70% for 15mins */
  import "by_ssh"
  vars.by_ssh_command = "/usr/lib/nagios/plugins/check_load -w 0.8,0.7,0.6 -c 0.9,0.9,0.8 "
}

/* 2 – Check mem */
/* En cours */

/* 3 – Check swap */
object CheckCommand "by_ssh_swap" {
  import "by_ssh"
  vars.by_ssh_command = "/usr/lib/nagios/plugins/check_swap -w $by_ssh_swap_warn$ -c $by_ssh_swap_crit$"
  vars.by_ssh_swap_warn = "75%"
  vars.by_ssh_swap_crit = "50%"
}

/* 4 – Check espace disque */
object CheckCommand "by_ssh_check_disk" {
  import "by_ssh"
  vars.by_ssh_command = "/usr/lib/nagios/plugins/check_disk -w $by_ssh_check_disk_warn$ -c $by_ssh_check_disk_crit$ /"
  vars.by_ssh_check_disk_warn = "100"
  vars.by_ssh_check_disk_crit = "50"
}

/* 5 – Check du temps */
/* En cours */

/* 6 – Check APT */
/object CheckCommand "by_ssh_apt" {
  import "by_ssh"
  vars.by_ssh_command = "/usr/lib/nagios/plugins/check_apt"
}

/* 7 – Check processus zombie */
/* En cours */

/* 8 – Check uptime */
/* En cours */

/* 9 – Check utilisateurs connecté */
/* En cours */

/* 10 – Check HTTP */
object CheckCommand "check_http" {
    command = "/usr/lib/nagios/plugins/check_http -H $fqdn$"
}

/* 11 – Check IO */
object CheckCommand "by_ssh_check_io" {
  import "by_ssh"
  vars.by_ssh_command = "/usr/lib/nagios/plugins/check_diskstat.sh -d sda -w 200,100000,100000 -c 300,200000,200000"
}

/* ############# Autre/applicatif ############ */

/* 12 – Check Cron */
/* En cours */

/* 12 – Check API */
/* En cours */

object CheckCommand "by_ssh_check_mount" {
  import "by_ssh"
  vars.by_ssh_command = "/usr/lib/nagios/plugins/check_mountpoints -a"
}

/* ############# Pour serveurs docker ############ */

object CheckCommand "by_ssh_docker_memory" {
  import "by_ssh"
  vars.by_ssh_command = "/usr/lib/nagios/plugins/check_docker –memory 80:90:%"
}

object CheckCommand "by_ssh_docker_cpu" {
  import "by_ssh"
  vars.by_ssh_command = "/usr/lib/nagios/plugins/check_docker –cpu 80:100"
}

object CheckCommand "by_ssh_docker_status" {
  import "by_ssh"
  vars.by_ssh_command = "/usr/lib/nagios/plugins/check_docker –status running"
}

/* ############# Pour les imprimantes ############ */

object CheckCommand "check_printer_snmp" {
  command = "/usr/lib/nagios/check_snmp_printer -H $address$ -C public -t 'CONSUM ALL' -w 10 -c 5"  
}

/*
Consumables you may monitor:
Black Toner [K] Cartridge;SN4805AF80E00004C6
Yellow Toner [Y] Cartridge;SN45215980E0000465
Magenta Toner [M] Cartridge;SN5712E880E0000412
Cyan Toner [C] Cartridge;SN190A0D80E00004FA
*/
object CheckCommand "check_printer_Xerox7120_Black" { 
command = "/usr/lib/nagios/plugins/check_snmp_printer -H $address$ -C public -t 'CONSUMX Black Toner [K] Cartridge;SN4805AF80E00004C6' -w 10 -c 5" }
object CheckCommand "check_printer_Xerox7120_Yellow" {
command = "/usr/lib/nagios/plugins/check_snmp_printer -H $address$ -C public -t 'CONSUMX Yellow Toner [Y] Cartridge;SN45215980E0000465' -w 10 -c 5" }
object CheckCommand "check_printer_Xerox7120_Magenta" {
command = "/usr/lib/nagios/plugins/check_snmp_printer -H $address$ -C public -t 'CONSUMX Magenta Toner [M] Cartridge;SN5712E880E0000412' -w 10 -c 5" }
object CheckCommand "check_printer_Xerox7120_Cyan" {
command = "/usr/lib/nagios/plugins/check_snmp_printer -H $address$ -C public -t 'CONSUMX Cyan Toner [C] Cartridge;SN190A0D80E00004FA' -w 10 -c 5" }

/*
## Brother HL-5450DN ##
Consumables you may monitor:
Black Toner Cartridge
Drum Unit
*/
object CheckCommand "check_printer_Brother_Black" {
command = "/usr/lib/nagios/check_snmp_printer -H $address$ -C public -t 'CONSUMX Black Toner Cartridge' -w 15 -c 5" }
object CheckCommand "check_printer_Brother_Drum" {
command = "/usr/lib/nagios/check_snmp_printer -H $address$ -C public -t 'CONSUMX Drum Unit' -w 15 -c 5" }


/* ##################### Serveur Externe ################## */

object CheckCommand "check_httpnew" {
    command = "/usr/lib/nagios/plugins/check_http -H $fqdn$"
}

object CheckCommand "check_http_certificat" {
    command = "/usr/lib/nagios/plugins/check_http -H $fqdn$ -C 30"
}

object CheckCommand "check_http_8080" {
    command = "/usr/lib/nagios/plugins/check_http -H $fqdn$ -p 8080"
}

/* ##################### NAS ################## */

object CheckCommand "by_snmp_qnap_check_hdstatus" {
  command = "/usr/lib/nagios/plugins/check_qnap2.sh -H $address$ -a hdstatus"
}

object CheckCommand "by_snmp_qnap_check_raidstatus" {
  command = "/usr/lib/nagios/plugins/check_qnap2.sh -H $address$ -a raidstatus"
}

object CheckCommand "by_snmp_qnap_check_diskusage" {
  command = "/usr/lib/nagios/plugins/check_qnap2.sh -H $address$ -a diskusage"
}
